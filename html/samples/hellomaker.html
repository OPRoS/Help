<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Sub Topic</title>
  </head>
  <body>
    <div id="main-content" class="wiki-content">
      <div class="wiki-content">
        <div id="main-content" class="wiki-content">
          <h2>Create HelloMaker component with OPRoS Component Editor, an OPRoS
            Tool</h2>
          <ol>
          </ol>
          <ul>
            <li>To compile OPRoS component in this editor, start eclipse with
              double click of OPRoSRun.bat in Windows<br>
            </li>
            <ul>
              <li>OPRoSRun.bat can be generated by double click of
                OPRoS_CE_Runner.jar<br>
              </li>
            </ul>
          </ul>
          <ol>
            <li>Click "Component Editor" OPRoS eclipse perspective <br>
              <img alt="" src="../img/ce_01.JPG" height="43" width="370"></li>
            <li>Check compile condition in "Preference" <br>
              <img alt="" src="../img/ce_02.JPG" height="205" width="323"> <img
                alt="" src="../img/ce_03.JPG" height="169" width="239"><br>
            </li>
            <li>Click OPRoS Component Creation Button</li>
            <li>Type a project name: HelloMaker <br>
              <img alt="" src="../img/ce_04.JPG" height="202" width="320"><br>
            </li>
            <li>Select compiler: MSVC++&nbsp;</li>
            <li>Type component name: HelloMaker <br>
              <img alt="" src="../img/ce_05.JPG" height="202" width="318"><br>
            </li>
            <li>Add a property: Drag "Property" in&nbsp; Palette into the same
              symbol part in the blue block (OPRoS component)<br>
              <img alt="" src="../img/ce_06.JPG" height="206" width="324"><br>
            </li>
            <ul>
              <li>Property Name: message,&nbsp; Property Type:
                std::string,&nbsp; Property Default Value: OPRoS</li>
              <li>This entered properties added in property section in the
                component profile, HelloMaker.xml</li>
              <li>Property can be used for user inputs or initial settings for
                different devices.<br>
              </li>
            </ul>
            <li>Add a service type: MessagePrint <br>
              <img alt="" src="../img/ce_07.JPG" height="207" width="325">
              <ul>
                <li>Service Name: print,&nbsp; Return-type: void,&nbsp;
                  Parameter Name: msg, Parameter Type: std::string</li>
                <li>This creates service port profile, MessagePrint.xml, that
                  generates service port header files, MessgePrintRequired.h and
                  MessagePrintProvided.h</li>
                <li>One servie type can have many methods for services. <br>
                </li>
              </ul>
            </li>
            <li>Add a service <strong>required</strong> port: Drag "Service
              Required Port" into the edge of the blue block (OPRoS component)<br>
              <img alt="" src="../img/ce_08.JPG" height="207" width="327">
              <ul>
                <li>Service Port Name: MessagePrint,&nbsp; Service Port
                  Type:MessagePrint</li>
              </ul>
            </li>
            <li>Add a data <strong>output</strong> port: Drag "Data Output
              Port" into the edge of the blue block (OPRoS component) <br>
              <img alt="" src="../img/ce_09.JPG" height="220" width="346">
              <ul>
                <li>Data Port Name: DataOut, Data Port Type: std::string</li>
              </ul>
            </li>
            <li>Add an event <strong>output</strong> port: Drag "Event Output
              Port" into the edge of the blue block (OPRoS component) <br>
              <img alt="" src="../img/ce_10.JPG" height="222" width="351"><br>
              <ul>
                <li>Event Port Name: EventOut, Event Port Type: std::string</li>
              </ul>
            </li>
            <li>Save the code with Ctrl+S, switch the tap "Profile View" to
              "Source View", or "Header View", then compile to see generated
              code <br>
              <img alt="" src="../img/ce_11.JPG" height="219" width="347"><br>
            </li>
            <li>Add user code</li>
            <ul>
              <li>HelloMaker.h
                <ul>
                  <li>int counter;</li>
                </ul>
              </li>
              <li>HelloMaker.cpp</li>
              <ul>
                <li> onStart() </li>
                <ol>
                  <li>counter=0;</li>
                </ol>
              </ul>
              <ul>
                <li>onExecute()</li>
              </ul>
              <ol>
                <ol>
                  <li>counter++;&nbsp; // periodically incremented</li>
                  <li>std::string msg = "Hello";</li>
                  <li>msg=<span style="COLOR: rgb(0,0,255)">getProperty</span>("message");&nbsp;
                    // read value of property item&nbsp;"message" in component
                    profile</li>
                  <li>std::stringstream outdata;</li>
                  <li>outdata&lt;&lt;msg&lt;&lt;"["&lt;&lt;counter&lt;&lt;"]";</li>
                  <li>if(counter%3==0)&nbsp; <span style="COLOR: rgb(0,0,255)">ptrMessagePrinter-&gt;print</span>(outdata.str());&nbsp;
                    // service port call</li>
                  <li>else if(counter%3==1) DataOut.<span style="COLOR: rgb(0,0,255)">push</span>(outdata.str());&nbsp;&nbsp;
                    // insert the data to&nbsp;the data port queue of receiver
                    component</li>
                  <li>
                    <p>else {</p>
                  </li>
                  <li>
                    <p>&nbsp;&nbsp; EventData&lt;std::string&gt;
                      evtData;&nbsp;&nbsp;</p>
                  </li>
                  <li>
                    <p>&nbsp;&nbsp; evtData.<span style="COLOR: rgb(0,0,255)">setId</span>("messageId");&nbsp;
                      // set event id</p>
                  </li>
                  <li>
                    <p>&nbsp;&nbsp; evtData.<span style="COLOR: rgb(0,0,255)">setContentData</span>(outdata.str());&nbsp;
                      // set event data</p>
                  </li>
                  <li>
                    <p>&nbsp;&nbsp; EventOut.<span style="COLOR: rgb(0,0,255)">push</span>(&amp;evtData);&nbsp;&nbsp;
                      }&nbsp;&nbsp; // insert the event to the receiver
                      component event port</p>
                  </li>
                </ol>
              </ol>
            </ul>
            <li>Compile the component as #12<br>
            </li>
            <li>Copy the component profile, <strong>OPRoS\OprosTools\workspace\HelloMaker\profile\HelloMaker.xml</strong>,
              and the component binary, <strong>OPRoS\</strong><strong>OprosTools\</strong><strong>workspace\HelloMaker\Release\HelloMaker.dll</strong>
              into <strong>OPRoS\OprosDevelopment\Repository|Components</strong><br>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </body>
</html>
